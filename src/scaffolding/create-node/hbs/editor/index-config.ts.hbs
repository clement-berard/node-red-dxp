import { type NodeEditorProps, createEditorNode } from '@keload/node-red-dxp/editor';
import { watchInput } from '@keload/node-red-dxp/editor/dom-helper';
import type { Node{{nodePascalName}}Props } from '../types';

interface NodeCredentials {
    user: string;
    password: string;
}

const {{nodePascalName}} = createEditorNode<NodeEditorProps<Node{{nodePascalName}}Props>, NodeCredentials>({
    category: 'my_cat',
    color: '#a6bbcf',
    defaults: {
        name: { value: '', required: true },
        age: { value: '' },
    },
    credentials: {
        user: { type: 'text' },
        password: { type: 'password' },
    },
    inputs: 1,
    outputs: 1,
    icon: 'font-awesome/fa-tower-broadcast',
    label: function () {
    return this.name || '{{nodePascalName}}';
    },
    oneditprepare: () => {
        // $age == #node-input-age in DOM
        watchInput('$age', ([ageValue]) => {
            console.log('ageValue', ageValue);
        });
    },
});

export default {{nodePascalName}};
