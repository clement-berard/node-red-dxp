[changelog]

body = """\
{% for group, commits_in_group in commits | group_by(attribute="group") %}
    ### {{ group | striptags | trim }}
    {% for commit in commits_in_group %}
        - {% if commit.scope %}**{{ commit.scope }}**: {% endif %}{{ commit.message }} \
            {%- if commit.links is defined and commit.links %}\
                {% for link in commit.links %} ([{{ link.text }}]({{ remote.github.url | default(value="https://github.com") }}/{{ remote.github.owner }}/{{ remote.github.repo }}/{{ link.href }}))
            {%- endfor %}
          {%- endif %}
          ([{{ commit.id | truncate(length=5, end="") }}]({{ remote.github.url | default(value="https://github.com") }}/{{ remote.github.owner }}/{{ remote.github.repo }}/commit/{{ commit.id }}))
    {%- endfor %}
{% endfor %}

{% for tonton in remote %}
    {{ tonton }}
    {% for truite in tonton %}
        {{ truite }}
    {% endfor %}
{% endfor %}

"""

trim = true
postprocessors = [
    { pattern = "\\s*\\(#(\\d+)\\)", replace = "" },
]

[git]
conventional_commits = true
filter_unconventional = true
sort_commits = "oldest"
commit_parsers = [
    { message = "^feat", group = "✨ Features" },
    { message = "^fix", group = "🐛 Bug Fixes" },
    { message = "^chore", group = "🧹 Chores" },
    { message = "^perf", group = "⚡ Performance Improvements" },
    { message = "^refactor", group = "♻️ Refactoring" },
    { message = "^docs", group = "📝 Documentation" },
    { message = "^doc", group = "📝 Documentation" },
    { message = "^style", group = "💄 Styling" },
    { message = "^test", group = "✅ Testing" },
    { message = "^build", group = "📦 Build System" },
    { message = "^ci", group = "🤖 Continuous Integration" },
    { message = "^revert", group = "⏪ Reverts" },
]

link_parsers = [
    { pattern = "\\(#(\\d+)\\)", href = "pull/$1", text = "#$1" },
]


#[remote.github]
#owner = "clement-berard"
#repo = "node-red-dxp"
#url = "https://github.com" # Utilisé pour construire les URLs absolues dans le template
